local source = {}

source.new = function()
	return setmetatable({}, { __index = source })
end

local emojis = {
	{ emoji = "ğŸ˜€", text = "Grinning Face" },
	{ emoji = "ğŸ˜ƒ", text = "Grinning Face with Big Eyes" },
	{ emoji = "ğŸ˜„", text = "Grinning Face with Smiling Eyes" },
	{ emoji = "ğŸ˜", text = "Beaming Face with Smiling Eyes" },
	{ emoji = "ğŸ˜†", text = "Grinning Squinting Face" },
	{ emoji = "ğŸ˜…", text = "Grinning Face with Sweat" },
	{ emoji = "ğŸ¤£", text = "Rolling on the Floor Laughing" },
	{ emoji = "ğŸ˜‚", text = "Face with Tears of Joy" },
	{ emoji = "ğŸ™‚", text = "Slightly Smiling Face" },
	{ emoji = "ğŸ™ƒ", text = "Upside-Down Face" },
	{ emoji = "ğŸ« ", text = "Melting Face" },
	{ emoji = "ğŸ˜‰", text = "Winking Face" },
	{ emoji = "ğŸ˜Š", text = "Smiling Face with Smiling Eyes" },
	{ emoji = "ğŸ˜‡", text = "Smiling Face with Halo" },
	{ emoji = "ğŸ¥°", text = "Smiling Face with Hearts" },
	{ emoji = "ğŸ˜", text = "Smiling Face with Heart-Eyes" },
	{ emoji = "ğŸ¤©", text = "Star-Struck" },
	{ emoji = "ğŸ˜˜", text = "Face Blowing a Kiss" },
	{ emoji = "ğŸ˜—", text = "Kissing Face" },
	{ emoji = "â˜ºï¸ ", text = "Smiling Face" },
	{ emoji = "ğŸ˜š", text = "Kissing Face with Closed Eyes" },
	{ emoji = "ğŸ˜™", text = "Kissing Face with Smiling Eyes" },
	{ emoji = "ğŸ¥²", text = "Smiling Face with Tear" },
	{ emoji = "ğŸ˜‹", text = "Face Savoring Food" },
	{ emoji = "ğŸ˜›", text = "Face with Tongue" },
	{ emoji = "ğŸ˜œ", text = "Winking Face with Tongue" },
	{ emoji = "ğŸ¤ª", text = "Zany Face" },
	{ emoji = "ğŸ˜", text = "Squinting Face with Tongue" },
	{ emoji = "ğŸ¤‘", text = "Money-Mouth Face" },
	{ emoji = "ğŸ¤—", text = "Smiling Face with Open Hands" },
	{ emoji = "ğŸ¤­", text = "Face with Hand Over Mouth" },
	{ emoji = "ğŸ«¢", text = "Face with Open Eyes and Hand Over Mouth" },
	{ emoji = "ğŸ«£", text = "Face with Peeking Eye" },
	{ emoji = "ğŸ¤«", text = "Shushing Face" },
	{ emoji = "ğŸ¤”", text = "Thinking Face" },
	{ emoji = "ğŸ«¡", text = "Saluting Face" },
	{ emoji = "ğŸ¤", text = "Zipper-Mouth Face" },
	{ emoji = "ğŸ¤¨", text = "Face with Raised Eyebrow" },
	{ emoji = "ğŸ˜", text = "Neutral Face" },
	{ emoji = "ğŸ˜‘", text = "Expressionless Face" },
	{ emoji = "ğŸ˜¶", text = "Face Without Mouth" },
	{ emoji = "ğŸ«¥", text = "Dotted Line Face" },
	{ emoji = "ğŸ˜¶", text = "Face in Clouds" },
	{ emoji = "ğŸ˜", text = "Smirking Face" },
	{ emoji = "ğŸ˜’", text = "Unamused Face" },
	{ emoji = "ğŸ™„", text = "Face with Rolling Eyes" },
	{ emoji = "ğŸ˜¬", text = "Grimacing Face" },
	{ emoji = "ğŸ˜®", text = "Face Exhaling" },
	{ emoji = "ğŸ¤¥", text = "Lying Face" },
	{ emoji = "ğŸ˜Œ", text = "Relieved Face" },
	{ emoji = "ğŸ˜”", text = "Pensive Face" },
	{ emoji = "ğŸ˜ª", text = "Sleepy Face" },
	{ emoji = "ğŸ¤¤", text = "Drooling Face" },
	{ emoji = "ğŸ˜´", text = "Sleeping Face" },
	{ emoji = "ğŸ˜·", text = "Face with Medical Mask" },
	{ emoji = "ğŸ¤’", text = "Face with Thermometer" },
	{ emoji = "ğŸ¤•", text = "Face with Head-Bandage" },
	{ emoji = "ğŸ¤¢", text = "Nauseated Face" },
	{ emoji = "ğŸ¤®", text = "Face Vomiting" },
	{ emoji = "ğŸ¤§", text = "Sneezing Face" },
	{ emoji = "ğŸ¥µ", text = "Hot Face" },
	{ emoji = "ğŸ¥¶", text = "Cold Face" },
	{ emoji = "ğŸ¥´", text = "Woozy Face" },
	{ emoji = "ğŸ˜µ", text = "Face with Crossed-Out Eyes" },
	{ emoji = "ğŸ˜µ", text = "ğŸ’« Face with Spiral Eyes" },
	{ emoji = "ğŸ¤¯", text = "Exploding Head" },
	{ emoji = "ğŸ¤ ", text = "Cowboy Hat Face" },
	{ emoji = "ğŸ¥³", text = "Partying Face" },
	{ emoji = "ğŸ¥¸", text = "Disguised Face" },
	{ emoji = "ğŸ˜", text = "Smiling Face with Sunglasses" },
	{ emoji = "ğŸ¤“", text = "Nerd Face" },
	{ emoji = "ğŸ§", text = "Face with Monocle" },
	{ emoji = "ğŸ˜•", text = "Confused Face" },
	{ emoji = "ğŸ«¤", text = "Face with Diagonal Mouth" },
	{ emoji = "ğŸ˜Ÿ", text = "Worried Face" },
	{ emoji = "ğŸ™", text = "Slightly Frowning Face" },
	{ emoji = "â˜¹ï¸", text = "Frowning Face" },
	{ emoji = "ğŸ˜®", text = "Face with Open Mouth" },
	{ emoji = "ğŸ˜¯", text = "Hushed Face" },
	{ emoji = "ğŸ˜²", text = "Astonished Face" },
	{ emoji = "ğŸ˜³", text = "Flushed Face" },
	{ emoji = "ğŸ¥º", text = "Pleading Face" },
	{ emoji = "ğŸ¥¹", text = "Face Holding Back Tears" },
	{ emoji = "ğŸ˜¦", text = "Frowning Face with Open Mouth" },
	{ emoji = "ğŸ˜§", text = "Anguished Face" },
	{ emoji = "ğŸ˜¨", text = "Fearful Face" },
	{ emoji = "ğŸ˜°", text = "Anxious Face with Sweat" },
	{ emoji = "ğŸ˜¥", text = "Sad but Relieved Face" },
	{ emoji = "ğŸ˜¢", text = "Crying Face" },
	{ emoji = "ğŸ˜­", text = "Loudly Crying Face" },
	{ emoji = "ğŸ˜±", text = "Face Screaming in Fear" },
	{ emoji = "ğŸ˜–", text = "Confounded Face" },
	{ emoji = "ğŸ˜£", text = "Persevering Face" },
	{ emoji = "ğŸ˜", text = "Disappointed Face" },
	{ emoji = "ğŸ˜“", text = "Downcast Face with Sweat" },
	{ emoji = "ğŸ˜©", text = "Weary Face" },
	{ emoji = "ğŸ˜«", text = "Tired Face" },
	{ emoji = "ğŸ¥±", text = "Yawning Face" },
	{ emoji = "ğŸ˜¤", text = "Face with Steam From Nose" },
	{ emoji = "ğŸ˜¡", text = "Enraged Face" },
	{ emoji = "ğŸ˜ ", text = "Angry Face" },
	{ emoji = "ğŸ¤¬", text = "Face with Symbols on Mouth" },
	{ emoji = "ğŸ˜ˆ", text = "Smiling Face with Horns" },
	{ emoji = "ğŸ‘¿", text = "Angry Face with Horns" },
	{ emoji = "ğŸ’€", text = "Skull" },
	{ emoji = "â˜ ï¸", text = "Skull and Crossbones" },
	{ emoji = "ğŸ’©", text = "Pile of Poo" },
	{ emoji = "ğŸ¤¡", text = "Clown Face" },
	{ emoji = "ğŸ‘¹", text = "Ogre" },
	{ emoji = "ğŸ‘º", text = "Goblin" },
	{ emoji = "ğŸ‘»", text = "Ghost" },
	{ emoji = "ğŸ‘½", text = "Alien" },
	{ emoji = "ğŸ‘¾", text = "Alien Monster" },
	{ emoji = "ğŸ¤–", text = "Robot" },
	{ emoji = "ğŸ˜º", text = "Grinning Cat" },
	{ emoji = "ğŸ˜¸", text = "Grinning Cat with Smiling Eyes" },
	{ emoji = "ğŸ˜¹", text = "Cat with Tears of Joy" },
	{ emoji = "ğŸ˜»", text = "Smiling Cat with Heart-Eyes" },
	{ emoji = "ğŸ˜¼", text = "Cat with Wry Smile" },
	{ emoji = "ğŸ˜½", text = "Kissing Cat" },
	{ emoji = "ğŸ™€", text = "Weary Cat" },
	{ emoji = "ğŸ˜¿", text = "Crying Cat" },
	{ emoji = "ğŸ˜¾", text = "Pouting Cat" },
	{ emoji = "ğŸ’‹", text = "Kiss Mark" },
	{ emoji = "ğŸ‘‹", text = "Waving Hand" },
	{ emoji = "ğŸ¤š", text = "Raised Back of Hand" },
	{ emoji = "ğŸ–ï¸", text = "Hand with Fingers Splayed" },
	{ emoji = "âœ‹", text = "Raised Hand" },
	{ emoji = "ğŸ«¶", text = "Heart Hands" },
	{ emoji = "ğŸ‘", text = "Open Hands" },
	{ emoji = "ğŸ¤²", text = "Palms Up Together" },
	{ emoji = "ğŸ¤", text = "Handshake" },
	{ emoji = "ğŸ™", text = "Folded Hands" },
	{ emoji = "âœï¸", text = "Writing Hand" },
	{ emoji = "ğŸ’…", text = "Nail Polish" },
	{ emoji = "ğŸ¤³", text = "Selfie" },
	{ emoji = "ğŸ’ª", text = "Flexed Biceps" },
	{ emoji = "ğŸ¦¾", text = "Mechanical Arm" },
	{ emoji = "ğŸ¦¿", text = "Mechanical Leg" },
	{ emoji = "ğŸ¦µ", text = "Leg" },
	{ emoji = "ğŸ§ ", text = "Brain" },
	{ emoji = "ğŸ«€", text = "Anatomical Heart" },
	{ emoji = "ğŸ«", text = "Lungs" },
	{ emoji = "ğŸ¦·", text = "Tooth" },
	{ emoji = "ğŸ¦´", text = "Bone" },
	{ emoji = "ğŸ‘€", text = "Eyes" },
	{ emoji = "ğŸ¤·", text = "Person Shrugging" },
	{ emoji = "ğŸ‘®", text = "Police Officer" },
	{ emoji = "ğŸ•µï¸", text = "Detective" },
	{ emoji = "ğŸ’‚", text = "Guard" },
	{ emoji = "ğŸ¥·", text = "Ninja" },
	{ emoji = "ğŸ‘·", text = "Construction Worker" },
	{ emoji = "ğŸ‘¼", text = "Baby Angel" },
	{ emoji = "ğŸ…", text = "Santa Claus" },
	{ emoji = "ğŸ¤¶", text = "Mrs. Claus" },
	{ emoji = "ğŸ¦¸", text = "Superhero" },
	{ emoji = "ğŸ¦¹", text = "Supervillain" },
	{ emoji = "ğŸ§™", text = "Mage" },
	{ emoji = "ğŸ§š", text = "Fairy" },
	{ emoji = "ğŸ§›", text = "Vampire" },
	{ emoji = "ğŸ§œ", text = "Merperson" },
	{ emoji = "ğŸ§", text = "Elf" },
	{ emoji = "ğŸ§", text = "Genie" },
	{ emoji = "ğŸ§Ÿ", text = "Zombie" },
	{ emoji = "ğŸ§Œ", text = "Troll" },
	{ emoji = "ğŸ’†", text = "Person Getting Massage" },
	{ emoji = "ğŸ’‡", text = "Person Getting Haircut" },
	{ emoji = "ğŸš¶", text = "Person Walking" },
	{ emoji = "ğŸ§", text = "Person Standing" },
	{ emoji = "ğŸ§", text = "Person Kneeling" },
	{ emoji = "ğŸƒ", text = "Person Running" },
	{ emoji = "ğŸ’ƒ", text = "Woman Dancing" },
	{ emoji = "ğŸ•º", text = "Man Dancing" },
	{ emoji = "ğŸ•´ï¸", text = "Person in Suit Levitating" },
	{ emoji = "ğŸ‘¯", text = "People with Bunny Ears" },
	{ emoji = "ğŸ§–", text = "Person in Steamy Room" },
	{ emoji = "ğŸ§˜", text = "Person in Lotus Position" },
	{ emoji = "ğŸ‘­", text = "Women Holding Hands" },
	{ emoji = "ğŸ‘«", text = "Woman and Man Holding Hands" },
	{ emoji = "ğŸ‘¬", text = "Men Holding Hands" },
	{ emoji = "ğŸ’", text = "Kiss" },
	{ emoji = "ğŸ’‘", text = "Couple with Heart" },
	{ emoji = "ğŸ‘ª", text = "Family" },
	{ emoji = "ğŸ—£ï¸", text = "Speaking Head" },
	{ emoji = "ğŸ‘¤", text = "Bust in Silhouette" },
	{ emoji = "ğŸ‘¥", text = "Busts in Silhouette" },
	{ emoji = "ğŸ«‚", text = "People Hugging" },
	{ emoji = "ğŸ‘£", text = "Footprints" },
	{ emoji = "ğŸ§³", text = "Luggage" },
	{ emoji = "ğŸŒ‚", text = "Closed Umbrella" },
	{ emoji = "â˜‚ï¸", text = "Umbrella" },
	{ emoji = "ğŸƒ", text = "Jack-O-Lantern" },
	{ emoji = "ğŸ§µ", text = "Thread" },
	{ emoji = "ğŸ§¶", text = "Yarn" },
	{ emoji = "ğŸ‘“", text = "Glasses" },
	{ emoji = "ğŸ•¶ï¸", text = "Sunglasses" },
	{ emoji = "ğŸ¥½", text = "Goggles" },
	{ emoji = "ğŸ¥¼", text = "Lab Coat" },
	{ emoji = "ğŸ¦º", text = "Safety Vest" },
	{ emoji = "ğŸ‘”", text = "Necktie" },
	{ emoji = "ğŸ‘•", text = "T-Shirt" },
	{ emoji = "ğŸ‘–", text = "Jeans" },
	{ emoji = "ğŸ§£", text = "Scarf" },
	{ emoji = "ğŸ§¤", text = "Gloves" },
	{ emoji = "ğŸ§¥", text = "Coat" },
	{ emoji = "ğŸ§¦", text = "Socks" },
	{ emoji = "ğŸ‘—", text = "Dress" },
	{ emoji = "ğŸ‘˜", text = "Kimono" },
	{ emoji = "ğŸ¥»", text = "Sari" },
	{ emoji = "ğŸ©±", text = "One-Piece Swimsuit" },
	{ emoji = "ğŸ©²", text = "Briefs" },
	{ emoji = "ğŸ©³", text = "Shorts" },
	{ emoji = "ğŸ‘™", text = "Bikini" },
	{ emoji = "ğŸ‘š", text = "Womanâ€™s Clothes" },
	{ emoji = "ğŸ‘›", text = "Purse" },
	{ emoji = "ğŸ‘œ", text = "Handbag" },
	{ emoji = "ğŸ‘", text = "Clutch Bag" },
	{ emoji = "ğŸ’", text = "Backpack" },
	{ emoji = "ğŸ©´", text = "Thong Sandal" },
	{ emoji = "ğŸ‘", text = "Manâ€™s Shoe" },
	{ emoji = "ğŸ‘Ÿ", text = "Running Shoe" },
	{ emoji = "ğŸ¥¾", text = "Hiking Boot" },
	{ emoji = "ğŸ¥¿", text = "Flat Shoe" },
	{ emoji = "ğŸ‘ ", text = "High-Heeled Shoe" },
	{ emoji = "ğŸ‘¡", text = "Womanâ€™s Sandal" },
	{ emoji = "ğŸ©°", text = "Ballet Shoes" },
	{ emoji = "ğŸ‘¢", text = "Womanâ€™s Boot" },
	{ emoji = "ğŸ‘‘", text = "Crown" },
	{ emoji = "ğŸ‘’", text = "Womanâ€™s Hat" },
	{ emoji = "ğŸ©", text = "Top Hat" },
	{ emoji = "ğŸ“", text = "Graduation Cap" },
	{ emoji = "ğŸ§¢", text = "Billed Cap" },
	{ emoji = "ğŸª–", text = "Military Helmet" },
	{ emoji = "â›‘ï¸", text = "Rescue Workerâ€™s Helmet" },
	{ emoji = "ğŸ’„", text = "Lipstick" },
	{ emoji = "ğŸ’", text = "Ring" },
	{ emoji = "ğŸ’¼", text = "Briefcase" },
	{ emoji = "ğŸ©¸", text = "Drop of Blood" },
}

source.complete = function(self, request, callback)
	local input = string.sub(request.context.cursor_before_line, request.offset - 1)

	local items = {}
	for key, value in pairs(emojis) do
		table.insert(items, {
			filterText = value.text,
			label = value.text .. " - " .. value.emoji,
			textEdit = {
				newText = value.emoji,
				range = {
					start = {
						line = request.context.cursor.row - 1,
						character = request.context.cursor.col - 1 - #input,
					},
					["end"] = {
						line = request.context.cursor.row - 1,
						character = request.context.cursor.col - 1,
					},
				},
			},
		})
	end
	callback({
		items = items,
		isIncomplete = true,
	})
end

-- import nvim-cmp plugin safely
local cmp_status, cmp = pcall(require, "cmp")
if not cmp_status then
	return
end

-- register emojis source
cmp.register_source("emojis", source.new())
